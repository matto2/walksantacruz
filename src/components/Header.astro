---
// Header Navigation Component
import Logo2 from './Logo2.astro';
const currentPath = Astro.url.pathname;
---

<header class="border-b border-border bg-background sticky top-0 z-40 backdrop-blur-sm bg-background/95">
	<nav class="container py-4">
		<div class="flex items-center justify-between">
			<!-- Logo/Brand -->
			<a href="/" class="hover:opacity-80 transition-opacity">
				<Logo2 />
			</a>

			<!-- Mobile Menu Button -->
			<button id="mobile-menu-button" class="md:hidden flex items-center gap-2" aria-label="Toggle menu">
				<span class="font-medium">Menu</span>
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<line x1="4" x2="20" y1="12" y2="12"></line>
					<line x1="4" x2="20" y1="6" y2="6"></line>
					<line x1="4" x2="20" y1="18" y2="18"></line>
				</svg>
			</button>

			<!-- Desktop Navigation -->
			<div class="hidden md:flex items-center gap-8">
				<a href="/" class={`text-foreground hover:text-primary transition-colors font-medium pb-1 border-b-[3px] ${currentPath === '/' ? 'font-bold border-primary' : 'border-transparent'}`}>
					Home
				</a>
				<a href="/gallery" class={`text-foreground hover:text-primary transition-colors font-medium pb-1 border-b-[3px] ${currentPath === '/gallery' ? 'font-bold border-primary' : 'border-transparent'}`}>
					Gallery
				</a>
				<a href="/about" class={`text-foreground hover:text-primary transition-colors font-medium pb-1 border-b-[3px] ${currentPath === '/about' ? 'font-bold border-primary' : 'border-transparent'}`}>
					About
				</a>
				<a href="/contact" class={`text-foreground hover:text-primary transition-colors font-medium pb-1 border-b-[3px] ${currentPath === '/contact' ? 'font-bold border-primary' : 'border-transparent'}`}>
					Contact
				</a>
				<!-- Stripe booking link -->
				<!-- FareHarbor (disabled): <a href="https://fareharbor.com/embeds/book/walksantacruz/?full-items=yes" class="btn">Book online now!</a> -->
				<a href="https://buy.stripe.com/5kQ00j3Kxa6P3VSgnZ1ck0j" class="btn">
					Book Tour
				</a>
			</div>
		</div>

		<!-- Mobile Navigation -->
		<div id="mobile-menu" class="hidden md:hidden mt-4 pt-4 border-t border-border">
			<div class="flex flex-col gap-4">
				<a href="/" class={`text-foreground hover:text-primary transition-colors font-medium ${currentPath === '/' ? 'font-bold' : ''}`}>
					Home
				</a>
				<a href="/gallery" class={`text-foreground hover:text-primary transition-colors font-medium ${currentPath === '/gallery' ? 'font-bold' : ''}`}>
					Gallery
				</a>
				<a href="/about" class={`text-foreground hover:text-primary transition-colors font-medium ${currentPath === '/about' ? 'font-bold' : ''}`}>
					About
				</a>
				<a href="/contact" class={`text-foreground hover:text-primary transition-colors font-medium ${currentPath === '/contact' ? 'font-bold' : ''}`}>
					Contact
				</a>
				<!-- Stripe booking link -->
				<!-- FareHarbor (disabled): <a href="https://fareharbor.com/embeds/book/walksantacruz/?full-items=yes" class="btn w-full">Book online now!</a> -->
				<a href="https://buy.stripe.com/5kQ00j3Kxa6P3VSgnZ1ck0j" class="btn w-full">
					Book Tour
				</a>
			</div>
		</div>
	</nav>
</header>

<script is:inline>
	function setupMobileMenu() {
		const menuButton = document.getElementById('mobile-menu-button');
		const mobileMenu = document.getElementById('mobile-menu');

		if (!menuButton || !mobileMenu) return;

		// Remove old listeners by cloning
		const newMenuButton = menuButton.cloneNode(true);
		menuButton.parentNode.replaceChild(newMenuButton, menuButton);

		newMenuButton.addEventListener('click', (e) => {
			e.preventDefault();
			mobileMenu.classList.toggle('hidden');
		});

		// Close mobile menu when clicking a link
		const mobileLinks = mobileMenu.querySelectorAll('a, button');
		mobileLinks.forEach(link => {
			link.addEventListener('click', () => {
				mobileMenu.classList.add('hidden');
			});
		});
	}

	// Run on initial load
	if (document.readyState === 'loading') {
		document.addEventListener('DOMContentLoaded', setupMobileMenu);
	} else {
		setupMobileMenu();
	}

	// Re-run after view transitions
	document.addEventListener('astro:page-load', setupMobileMenu);
</script>
